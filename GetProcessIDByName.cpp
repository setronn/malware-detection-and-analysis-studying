#include <windows.h>
#include <tlhelp32.h>
#include <tchar.h>
#include <stdio.h>
#include <string.h>

int GetProcessIDByName(WCHAR targetProcessName[])
{
    HANDLE hProcessSnap;
    HANDLE hProcess;
    PROCESSENTRY32 pe32;

    hProcessSnap = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);
    pe32.dwSize = sizeof(PROCESSENTRY32);

    while (Process32Next(hProcessSnap, &pe32) ) 
    {
        if (wcsstr(pe32.szExeFile, targetProcessName) != 0) {
            return pe32.th32ProcessID;
        }
    }
    return -1;
    CloseHandle(hProcessSnap);
}

int main( void )
{
  WCHAR processName[] = L"notepad.exe";
  int targetProcessId = GetProcessIDByName(processName);
  printf("%d", targetProcessId);
  getchar();
}
